{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2021-06-04-gatsbyjs-setup-seo",
    "result": {"data":{"markdownRemark":{"html":"<p>いまのままではこのブログのtitleにURLがむきだしになっているため、メタデータを設定します。</p>\n<p>まずは必要なプラグインをインストールします。</p>\n<pre><code>yarn add gatsby-olugin-react-helmet- react-helmet\n</code></pre>\n<p>gatsby-config.jsにも忘れずに記載します。</p>\n<p>まずサイト全体で使用するメタデータの値を用意します。</p>\n<pre><code class=\"language-javascript\">module.exports = {\n  siteMetadata: {\n    title: \"ブログタイトル\",\n    description: \"ブログの概要\",\n    lang: \"ja\",\n  },\n</code></pre>\n<p>そしてクエリを作成します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/00b92cc4dd2b67ca1078cf5746d93dff/c65fa/image-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVQY04WPSwrDMBBDff9rZlFK0zgez8dd1K80WcQplAiEBoEGKdW50PzFF733jSNGr5bKmgX1wKPtbO24o5FmCeTiIX1Xd2e6Z6bbQn0U9CloruiqmBhmQervfgQ35W9DMyNnQYpi6mdaYB6kMfTb7mi4+1oVXQpmfpo5Tv4Aavw5eu7j6S4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsbyjs-setup-seo-img01\"\n        title=\"gatsbyjs-setup-seo-img01\"\n        src=\"/static/00b92cc4dd2b67ca1078cf5746d93dff/5a190/image-01.png\"\n        srcset=\"/static/00b92cc4dd2b67ca1078cf5746d93dff/772e8/image-01.png 200w,\n/static/00b92cc4dd2b67ca1078cf5746d93dff/e17e5/image-01.png 400w,\n/static/00b92cc4dd2b67ca1078cf5746d93dff/5a190/image-01.png 800w,\n/static/00b92cc4dd2b67ca1078cf5746d93dff/c1b63/image-01.png 1200w,\n/static/00b92cc4dd2b67ca1078cf5746d93dff/c65fa/image-01.png 1434w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>こんな感じ。</p>\n<p>src/components/以下にseo.jsを作成して、クエリを追加します。</p>\n<pre><code class=\"language-javascript\">import React from \"react\"\nimport { Helmet } from \"react-helmet\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nconst Seo = () => {\n  const data = useStaticQuery(graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n        description\n        lang\n      }\n    }\n  }\n`)\n\n  return (\n    &#x3C;Helmet>\n      &#x3C;html lang={data.site.siteMetadata.lang} />\n      &#x3C;title>{data.site.siteMetadata.title}&#x3C;/title>\n      &#x3C;meta name=\"description\" content={data.site.siteMetadata.description} />\n    &#x3C;/Helmet>\n  )\n\n}\n\nexport default Seo\n</code></pre>\n<p>これで基本の設定は完了です。</p>\n<h4>ページごとにメタデータの値を変える</h4>\n<p>つづいては、他のページのタイトルと説明をpropsで置き換えられるようにします。</p>\n<pre><code>const Seo = props => { ... }\n</code></pre>\n<p><code>()</code>をpropsに置き換えます。</p>\n<p>各ページでタイトルや説明に指定が入っている場合、値を置き換えるようにします。</p>\n<pre><code class=\"language-javascript\">  const title = props.pagetitle\n    ? `${props.pagetitle} | ${data.site.siteMetadata.title}`\n    : data.site.siteMetadata.title\n  const desc = props.pagedesc || data.site.siteMetadata.description\n  \n  return (...)\n</code></pre>\n<p>こんな感じです。</p>\n<p>これを応用して、URLを明示させましょう。seo.jsに以下を追加します。</p>\n<pre><code class=\"language-javascript\">  const url = props.pagepath\n    ? `${data.site.siteMetadata.siteUrl}${props.pagepath}`\n    : data.site.siteMetadata.siteUrl\n    \n    return (...)\n</code></pre>\n<p>そして404ページに<code>location</code>を追加し、ページのパスを指定します。</p>\n<pre><code class=\"language-javascript\">const NotFoundPage = ({ location }) => { \n  return (\n    &#x3C;Layout>\n      &#x3C;Seo pagetitle=\"ページが見つかりません\"\n        pagepath={location.pathname} />\n</code></pre>\n<p>これでひとまずメタデータの設定は完了です。</p>\n<h4>OGPを追加する</h4>\n<p>普通のWebサイト同様、OGPの設定を書いていきます。</p>\n<pre><code class=\"language-javascript\">  const url = props.pagepath\n    ? `${data.site.siteMetadata.siteUrl}${props.pagepath}`\n    : data.site.siteMetadata.siteUrl\n\n  const imgurl = props.pageimg\n    ? `${data.site.siteMetadata.siteUrl}${props.pageimg}`\n    : `${data.site.siteMetadata.siteUrl}/ogimage.jpg`\n\n  const imgw = props.pageimgw || 1200\n  const imgh = props.pageimgh || 600\n</code></pre>\n<p>URLやOGイメージ画像の設定は上記のとおりです。</p>\n<pre><code class=\"language-javascript\">  return (\n    &#x3C;Helmet>\n      {/* ogp */}\n      &#x3C;meta property=\"og:site_name\" content={data.site.siteMetadata.title} />\n      &#x3C;meta property=\"og:title\" content={title} />\n      &#x3C;meta property=\"og:description\" content={desc} />\n      &#x3C;meta property=\"og:url\" content={url} />\n      &#x3C;meta property=\"og:type\" content=\"website\" />\n      {/* ogp image */}\n      &#x3C;meta property=\"og:image\" content={imgurl} />\n      &#x3C;meta property=\"og:image:width\" content={imgw} />\n      &#x3C;meta property=\"og:image:height\" content={imgh} />\n      &#x3C;meta name=\"twitter:card\" content=\"summary_large_image\" />\n    &#x3C;/Helmet>\n  )\n</code></pre>\n<p>設定は以上です。</p>","frontmatter":{"title":"[GatbyJS] サイトにメタデータやOGPを設定する","date":"Jun 4 2021","category":["Tech"],"slug":"2021-06-04-gatsbyjs-setup-seo","tags":["GatsbyJS"],"emoji":null},"tableOfContents":"<ul>\n<li><a href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%94%E3%81%A8%E3%81%AB%E3%83%A1%E3%82%BF%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%80%A4%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\">ページごとにメタデータの値を変える</a></li>\n<li><a href=\"#ogp%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\">OGPを追加する</a></li>\n</ul>"}},"pageContext":{"slug":"2021-06-04-gatsbyjs-setup-seo"}},
    "staticQueryHashes": ["1251827014","4173678595"]}